<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>GPT Ë¥¶Âè∑ÂàáÊç¢</title>
    <link rel="stylesheet" href="popup.css">
    <style>
        .svg-icon {
            width: 16px;
            height: 16px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
    </style>
</head>

<body>

    <header>
        <div class="brand">
            <img src="icons/Logo.png" width="20" height="20" alt="Logo">
            <span>GPT Switcher</span>
        </div>
        <div class="header-actions">
            <!-- Login / Logout Link -->
            <button id="loginLinkBtn" title="ÂéªÁôªÂΩïÈ°µ">
                <svg class="svg-icon" viewBox="0 0 24 24">
                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
                    <polyline points="10 17 15 12 10 7" />
                    <line x1="15" y1="12" x2="3" y2="12" />
                </svg>
            </button>
            <!-- Theme Toggle -->
            <button id="themeBtn" title="ÂàáÊç¢‰∏ªÈ¢ò">
                <svg class="svg-icon" viewBox="0 0 24 24">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
            <!-- Settings / Tools Toggle -->
            <button id="toolsToggle" title="Â∑•ÂÖ∑">
                <svg class="svg-icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="1"></circle>
                    <circle cx="19" cy="12" r="1"></circle>
                    <circle cx="5" cy="12" r="1"></circle>
                </svg>
            </button>
            <!-- Tools Dropdown -->
            <div class="tools-dropdown" id="toolsMenu">
                <button class="tools-item" id="exportBtn">üì§ ÂØºÂá∫ÈÖçÁΩÆ</button>
                <button class="tools-item" id="importBtn">üì• ÂØºÂÖ•ÈÖçÁΩÆ</button>
                <div style="height:1px; background:#eee; margin:4px 0;"></div>
                <button class="tools-item" id="clearAllBtn" style="color: red;">‚ö†Ô∏è Ê∏ÖÁ©∫Êï∞ÊçÆ</button>
            </div>
        </div>
    </header>

    <!-- Â∑•ÂÖ∑Ê†èÂå∫ÂüüÔºàÂõ∫ÂÆö‰∏çÊªöÂä®Ôºâ -->
    <section class="section-header">
        <div class="toolbar">
            <div class="search-container">
                <span class="search-icon">
                    <svg class="svg-icon" style="width:14px;height:14px;" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </span>
                <input type="text" id="searchBox" class="search-input" placeholder="ÊêúÁ¥¢Ë¥¶Âè∑...">
            </div>
            <button id="syncCurrentBtn" class="toolbar-btn" title="Êõ¥Êñ∞ÂΩìÂâçË¥¶Âè∑‰ø°ÊÅØ">
                <svg class="svg-icon" viewBox="0 0 24 24">
                    <polyline points="1 4 1 10 7 10"></polyline>
                    <polyline points="23 20 23 14 17 14"></polyline>
                    <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10M23 14l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                </svg>
            </button>
            <button id="tagsManageBtn" class="toolbar-btn" title="Ê†áÁ≠æÁÆ°ÁêÜ">
                <svg class="svg-icon" viewBox="0 0 24 24">
                    <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                    <line x1="7" y1="7" x2="7.01" y2="7"></line>
                </svg>
            </button>
            <button id="toggleAddBtn" class="add-btn-main" title="Ê∑ªÂä†Êñ∞Ë¥¶Âè∑">+</button>
        </div>

        <!-- Ê†áÁ≠æÁ≠õÈÄâÊ†è -->
        <div id="tagFilterBar" class="tag-filter-bar">
            <!-- Áî± JS Âä®ÊÄÅÊ∏≤Êüì -->
        </div>
    </section>

    <main>
        <div id="modalOverlay" class="modal-overlay"></div>

        <div id="editForm" class="modal-form">
            <h3 id="modalTitle">Ê∑ªÂä†Ë¥¶Âè∑</h3>
            <div class="form-row">
                <input type="text" id="inputEmail" class="form-input" placeholder="Email / Â§áÊ≥®Âêç" autocomplete="off">
            </div>
            <div class="form-row">
                <input type="text" id="inputToken" class="form-input" placeholder="Session Token" autocomplete="off">
                <button id="grabBtn" class="btn btn-grab" title="Ëá™Âä®Ëé∑ÂèñÂΩìÂâç Token">
                    <svg class="svg-icon" viewBox="0 0 24 24">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                </button>
            </div>
            <div class="form-row tag-selector-row">
                <label>ÈÄâÊã©Ê†áÁ≠æ:</label>
                <div id="tagSelector" class="tag-selector">
                    <!-- Tags will be injected by JS -->
                </div>
            </div>
            <div class="form-actions">
                <button id="cancelEditBtn" class="btn btn-secondary">ÂèñÊ∂à</button>
                <button id="saveBtn" class="btn btn-primary">‰øùÂ≠ò</button>
            </div>
        </div>

        <!-- Ê†áÁ≠æÁÆ°ÁêÜÂºπÁ™ó -->
        <div id="tagManagerModal" class="modal-form tag-manager-modal">
            <h3>Ê†áÁ≠æÁÆ°ÁêÜ</h3>
            <div id="tagList" class="tag-list">
                <!-- Tags will be injected by JS -->
            </div>
            <div class="tag-add-section">
                <input type="text" id="newTagName" class="form-input" placeholder="Êñ∞Ê†áÁ≠æÂêçÁß∞" autocomplete="off">
                <div id="colorPicker" class="color-picker">
                    <span class="color-option" data-color="#22c55e" style="background:#22c55e"></span>
                    <span class="color-option" data-color="#3b82f6" style="background:#3b82f6"></span>
                    <span class="color-option" data-color="#eab308" style="background:#eab308"></span>
                    <span class="color-option" data-color="#a855f7" style="background:#a855f7"></span>
                    <span class="color-option" data-color="#ef4444" style="background:#ef4444"></span>
                    <span class="color-option" data-color="#06b6d4" style="background:#06b6d4"></span>
                    <span class="color-option" data-color="#ec4899" style="background:#ec4899"></span>
                    <span class="color-option selected" data-color="#6b7280" style="background:#6b7280"></span>
                </div>
                <button id="addTagBtn" class="btn btn-primary">Ê∑ªÂä†</button>
            </div>
            <div class="form-actions">
                <button id="closeTagManagerBtn" class="btn btn-secondary">ÂÖ≥Èó≠</button>
            </div>
        </div>

        <!-- Ê†áÁ≠æÁºñËæëÂºπÁ™óÈÅÆÁΩ© -->
        <div id="tagEditOverlay" class="tag-edit-overlay"></div>

        <!-- Ê†áÁ≠æÁºñËæëÂºπÁ™ó -->
        <div id="tagEditModal" class="modal-form tag-edit-modal">
            <h3>ÁºñËæëÊ†áÁ≠æ</h3>
            <div class="form-row">
                <input type="text" id="editTagName" class="form-input" placeholder="Ê†áÁ≠æÂêçÁß∞" autocomplete="off">
            </div>
            <div class="form-row">
                <label style="font-size:12px;color:var(--text-sub);margin-bottom:6px;">ÈÄâÊã©È¢úËâ≤:</label>
                <div id="editColorPicker" class="color-picker">
                    <span class="color-option" data-color="#22c55e" style="background:#22c55e"></span>
                    <span class="color-option" data-color="#3b82f6" style="background:#3b82f6"></span>
                    <span class="color-option" data-color="#eab308" style="background:#eab308"></span>
                    <span class="color-option" data-color="#a855f7" style="background:#a855f7"></span>
                    <span class="color-option" data-color="#ef4444" style="background:#ef4444"></span>
                    <span class="color-option" data-color="#06b6d4" style="background:#06b6d4"></span>
                    <span class="color-option" data-color="#ec4899" style="background:#ec4899"></span>
                    <span class="color-option" data-color="#6b7280" style="background:#6b7280"></span>
                </div>
            </div>
            <div class="form-actions">
                <button id="cancelEditTagBtn" class="btn btn-secondary">ÂèñÊ∂à</button>
                <button id="saveEditTagBtn" class="btn btn-primary">‰øùÂ≠ò</button>
            </div>
        </div>

        <ul id="accountList">
            <!-- List items injected by JS -->
        </ul>
    </main>

    <input type="file" id="fileInput" accept=".json,.txt" style="display: none;">

    <!-- Âà†Èô§Á°ÆËÆ§ÂºπÁ™ó -->
    <div id="deleteModal" class="delete-modal">
        <div class="delete-modal-content">
            <div class="delete-icon">üóëÔ∏è</div>
            <h3>Á°ÆËÆ§Âà†Èô§</h3>
            <p id="deleteMessage">Á°ÆÂÆöË¶ÅÂà†Èô§ËØ•Ë¥¶Âè∑ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ</p>
            <div class="delete-actions">
                <button id="cancelDeleteBtn" class="btn btn-secondary">ÂèñÊ∂à</button>
                <button id="confirmDeleteBtn" class="btn btn-danger">Âà†Èô§</button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="Sortable.min.js"></script>
    <script type="module" src="popup/main.js"></script>
</body>

</html>